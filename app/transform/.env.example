# CardDemo Modernization - Environment Configuration
# Copy this file to .env and update with your values

# =============================================================================
# JWT Configuration (REQUIRED)
# =============================================================================
# Secret key for JWT token generation and validation
# IMPORTANT: Generate a secure random key for production
# Generate with: openssl rand -base64 32
JWT_SECRET=change-this-to-a-secure-random-key-minimum-32-characters

# JWT token expiration time in milliseconds (default: 24 hours)
JWT_EXPIRATION=86400000

# =============================================================================
# Database Configuration
# =============================================================================
# PostgreSQL connection URL
# Format: jdbc:postgresql://host:port/database
DATABASE_URL=jdbc:postgresql://postgres:5432/carddemo

# Database credentials
DATABASE_USERNAME=carddemo_user
DATABASE_PASSWORD=carddemo_password_change_in_production

# Database connection pool settings
DATABASE_POOL_SIZE=10
DATABASE_MAX_LIFETIME=1800000

# =============================================================================
# Backend Configuration
# =============================================================================
# Server port for backend API
SERVER_PORT=8080

# Spring Boot profile (dev, staging, prod)
SPRING_PROFILES_ACTIVE=prod

# Application name
SPRING_APPLICATION_NAME=carddemo-backend

# =============================================================================
# Frontend Configuration
# =============================================================================
# Backend API base URL (used by frontend)
# For Docker: http://backend:8080/api
# For local dev: http://localhost:8080/api
VITE_API_BASE_URL=http://localhost:8080/api

# Frontend port (for development)
VITE_PORT=5173

# =============================================================================
# CORS Configuration
# =============================================================================
# Comma-separated list of allowed origins
# Development: http://localhost:5173,http://localhost:3000
# Production: https://yourdomain.com
CORS_ALLOWED_ORIGINS=http://localhost,http://localhost:80

# Allowed HTTP methods
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS

# Allowed headers
CORS_ALLOWED_HEADERS=*

# Allow credentials
CORS_ALLOW_CREDENTIALS=true

# =============================================================================
# Logging Configuration
# =============================================================================
# Log level (TRACE, DEBUG, INFO, WARN, ERROR)
LOG_LEVEL=INFO

# Log file location
LOG_FILE=/var/log/carddemo/application.log

# Log pattern
LOG_PATTERN=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# =============================================================================
# Security Configuration
# =============================================================================
# Enable/disable security features
SECURITY_ENABLED=true

# Password encoding strength (4-31, higher is more secure but slower)
PASSWORD_ENCODER_STRENGTH=10

# Session timeout in seconds (default: 30 minutes)
SESSION_TIMEOUT=1800

# Maximum login attempts before lockout
MAX_LOGIN_ATTEMPTS=5

# Account lockout duration in minutes
LOCKOUT_DURATION=30

# =============================================================================
# Flyway Migration Configuration
# =============================================================================
# Enable/disable Flyway migrations
FLYWAY_ENABLED=true

# Flyway baseline version
FLYWAY_BASELINE_VERSION=1

# Flyway baseline on migrate
FLYWAY_BASELINE_ON_MIGRATE=true

# =============================================================================
# Actuator Configuration
# =============================================================================
# Enable/disable Spring Boot Actuator endpoints
MANAGEMENT_ENDPOINTS_ENABLED=true

# Exposed actuator endpoints (comma-separated)
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info,metrics

# Actuator port (use same as server port or different)
MANAGEMENT_SERVER_PORT=8080

# =============================================================================
# Performance Configuration
# =============================================================================
# Enable/disable caching
CACHE_ENABLED=true

# Cache TTL in seconds
CACHE_TTL=3600

# Enable/disable compression
COMPRESSION_ENABLED=true

# Minimum response size for compression (bytes)
COMPRESSION_MIN_SIZE=1024

# =============================================================================
# Pagination Configuration
# =============================================================================
# Default page size for paginated endpoints
DEFAULT_PAGE_SIZE=20

# Maximum page size
MAX_PAGE_SIZE=100

# =============================================================================
# Transaction Configuration
# =============================================================================
# Transaction timeout in seconds
TRANSACTION_TIMEOUT=30

# =============================================================================
# File Upload Configuration
# =============================================================================
# Maximum file upload size (MB)
MAX_FILE_SIZE=10

# Maximum request size (MB)
MAX_REQUEST_SIZE=10

# =============================================================================
# Email Configuration (Optional)
# =============================================================================
# SMTP server configuration
MAIL_HOST=smtp.example.com
MAIL_PORT=587
MAIL_USERNAME=noreply@example.com
MAIL_PASSWORD=your-email-password
MAIL_FROM=noreply@example.com

# Enable/disable email notifications
MAIL_ENABLED=false

# =============================================================================
# Monitoring Configuration (Optional)
# =============================================================================
# Enable/disable Prometheus metrics
PROMETHEUS_ENABLED=false

# Prometheus metrics port
PROMETHEUS_PORT=9090

# =============================================================================
# External Services Configuration (Optional)
# =============================================================================
# External API endpoints
EXTERNAL_API_URL=https://api.example.com
EXTERNAL_API_KEY=your-api-key

# =============================================================================
# Development Configuration
# =============================================================================
# Enable/disable development mode features
DEV_MODE=false

# Enable/disable SQL logging
SHOW_SQL=false

# Enable/disable H2 console (development only)
H2_CONSOLE_ENABLED=false

# =============================================================================
# Docker Configuration
# =============================================================================
# Docker network name
DOCKER_NETWORK=carddemo-network

# Container names
POSTGRES_CONTAINER=carddemo-postgres
BACKEND_CONTAINER=carddemo-backend
FRONTEND_CONTAINER=carddemo-frontend

# =============================================================================
# Backup Configuration
# =============================================================================
# Backup directory
BACKUP_DIR=/backups

# Backup retention days
BACKUP_RETENTION_DAYS=30

# Enable/disable automated backups
BACKUP_ENABLED=true

# Backup schedule (cron expression)
BACKUP_SCHEDULE=0 2 * * *

# =============================================================================
# Notes
# =============================================================================
# 1. Never commit the .env file to version control
# 2. Generate secure random values for JWT_SECRET and DATABASE_PASSWORD
# 3. Update CORS_ALLOWED_ORIGINS to match your domain in production
# 4. Set LOG_LEVEL to WARN or ERROR in production
# 5. Enable HTTPS in production by configuring SSL certificates
# 6. Review and adjust resource limits in docker-compose.yml
# 7. Set up monitoring and alerting for production deployments
# 8. Configure automated backups for production databases
# 9. Use Docker secrets or environment-specific secret management in production
# 10. Test all configuration changes in a staging environment first
